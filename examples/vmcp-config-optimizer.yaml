# vMCP Configuration with Optimizer Enabled (for Development/Debug)
# This config enables the optimizer integration for semantic tool discovery

name: "vmcp-debug-optimizer"

# Reference to ToolHive group containing MCP servers
groupRef: "default"

# Client authentication (anonymous for local development)
incomingAuth:
  type: anonymous

# Backend authentication (unauthenticated for local development)
outgoingAuth:
  source: inline
  default:
    type: unauthenticated

# Tool aggregation settings
aggregation:
  conflictResolution: prefix
  conflictResolutionConfig:
    prefixFormat: "{workload}_"
  tools:
    # Optional: Filter tools (useful for testing specific backends)
    # include:
    #   - "weather_*"
    #   - "github_*"

# Optimizer Configuration (EXPERIMENTAL - RFC-0022)
# NOTE: This is not yet wired into the YAML config loader
# For now, optimizer needs to be enabled programmatically in code
# or via environment variables/command-line flags (to be implemented)
optimizer:
  enabled: true
  dbPath: "/tmp/vmcp-optimizer-debug.db"
  embedding:
    # Backend: "vllm" | "ollama" | "placeholder"
    backend: "placeholder"  # Use placeholder for development (no external service needed)
    
    # For vLLM (production):
    # backend: "vllm"
    # url: "http://vllm-service:8080/v1"
    # model: "BAAI/bge-small-en-v1.5"
    # dimension: 384
    
    # For Ollama (local development):
    # backend: "ollama"
    # url: "http://localhost:11434"
    # model: "all-minilm"
    # dimension: 384
    
    url: ""           # Not needed for placeholder
    model: ""         # Not needed for placeholder  
    dimension: 384    # Standard dimension for all-MiniLM-L6-v2

# Operational settings
operational:
  healthCheck:
    enabled: true
    interval: "30s"
    timeout: "5s"
    unhealthyThreshold: 3
    degradedThreshold: 1

# Telemetry (optional - disable for cleaner debug logs)
# telemetry:
#   enabled: true
#   serviceName: "vmcp-debug"
#   endpoint: "localhost:4317"

# Audit logging (optional - useful for debugging auth flows)
# audit:
#   enabled: true
#   logLevel: "debug"
#   outputs:
#     - type: "stdout"
