apiVersion: toolhive.stacklok.dev/v1alpha1
kind: VirtualMCPServer
metadata:
  name: test-vmcp-controller
  namespace: toolhive-system
spec:
  groupRef:
    name: test-group-controller
  incomingAuth:
    oidcConfig:
      type: inline
      inline:
        issuer: https://auth.example.com
        audience: virtual-mcp-controller
    authzConfig:
      type: inline
      inline:
        policies:
          - 'permit(principal, action, resource);'
  outgoingAuth:
    source: discovered
  aggregation:
    conflictResolution: prefix
  operational:
    failureHandling:
      healthCheckInterval: 30s
