# vMCP Configuration for Development/Debug (Working Config)
# Simplified config that works with current vMCP implementation

name: "vmcp-debug"

# Reference to ToolHive group containing MCP servers
groupRef: "default"

# Client authentication (anonymous for local development)
incomingAuth:
  type: anonymous

# Backend authentication (unauthenticated for local development)
outgoingAuth:
  source: inline
  default:
    type: unauthenticated

# Tool aggregation settings
aggregation:
  conflictResolution: prefix
  conflictResolutionConfig:
    prefixFormat: "{workload}_"

# Operational settings - use correct structure
operational:
  timeouts:
    default: 30s
  failureHandling:
    healthCheckInterval: 30s
    unhealthyThreshold: 3
    partialFailureMode: fail

# =============================================================================
# OPTIMIZER CONFIGURATION (NOT YET IMPLEMENTED IN CONFIG PARSER)
# =============================================================================
# The optimizer integration exists in code but config parsing is Phase 2.
# For now, the optimizer needs to be enabled programmatically.
# 
# Planned config structure (for reference):
#
# optimizer:
#   enabled: true
#   dbPath: "/tmp/vmcp-optimizer-debug.db"
#   embedding:
#     backend: "placeholder"  # vllm | ollama | placeholder
#     url: ""                 # For vLLM/Ollama
#     model: ""               # Model name
#     dimension: 384          # Vector dimension
#
# To enable optimizer for debugging, you'll need to modify:
#   cmd/vmcp/app/commands.go in runServe() function
#
# Example code to add after line ~400:
#   if cfg.Name == "vmcp-debug" {
#       serverCfg.OptimizerConfig = &vmcpserver.OptimizerConfig{
#           Enabled: true,
#           DBPath: "/tmp/vmcp-optimizer-debug.db",
#           EmbeddingBackend: "placeholder",
#           EmbeddingDimension: 384,
#       }
#   }
# =============================================================================
